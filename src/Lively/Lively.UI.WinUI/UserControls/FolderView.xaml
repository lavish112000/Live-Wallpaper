<UserControl
    x:Class="Lively.UI.WinUI.UserControls.FolderView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:data="using:Lively.Models.UserControls"
    xmlns:helpers="using:Lively.UI.WinUI.Helpers"
    xmlns:local="using:Lively.UI.WinUI.UserControls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <!--  Ref: https://github.com/microsoft/WinUI-Gallery/blob/main/WinUIGallery/Samples/ControlPages/TreeViewPage.xaml  -->
    <UserControl.Resources>
        <DataTemplate x:Key="FolderTemplate" x:DataType="data:ExplorerItem">
            <TreeViewItem
                AutomationProperties.Name="{x:Bind Name}"
                IsExpanded="False"
                ItemsSource="{x:Bind Children}">

                <StackPanel Orientation="Horizontal" ToolTipService.ToolTip="{x:Bind Name}">
                    <Image Width="20" Source="ms-appx:///Assets/folder.png" />
                    <TextBlock Margin="0,0,10,0" />
                    <TextBlock Text="{x:Bind Name}" />
                </StackPanel>
            </TreeViewItem>
        </DataTemplate>

        <DataTemplate x:Key="FileTemplate" x:DataType="data:ExplorerItem">
            <TreeViewItem AutomationProperties.Name="{x:Bind Name}">
                <StackPanel Orientation="Horizontal">
                    <FontIcon Glyph="&#xE8A5;" />
                    <TextBlock Margin="0,0,10,0" />
                    <TextBlock Text="{x:Bind Name}" />
                </StackPanel>
            </TreeViewItem>
        </DataTemplate>

        <helpers:ExplorerItemTemplateSelector
            x:Key="ExplorerItemTemplateSelector"
            FileTemplate="{StaticResource FileTemplate}"
            FolderTemplate="{StaticResource FolderTemplate}" />
    </UserControl.Resources>
    <Grid
        Background="{ThemeResource SystemAltLowColor}"
        BorderBrush="{ThemeResource TextControlBorderBrush}"
        BorderThickness="1"
        CornerRadius="5">
        <TreeView
            Height="400"
            MinWidth="375"
            MaxWidth="375"
            Margin="0,12,0,0"
            HorizontalAlignment="Center"
            VerticalAlignment="Top"
            BorderBrush="{ThemeResource SystemAltMediumColor}"
            BorderThickness="1"
            CanDragItems="False"
            CanReorderItems="False"
            ItemTemplateSelector="{StaticResource ExplorerItemTemplateSelector}"
            ItemsSource="{x:Bind Data}"
            SelectionMode="None" />
    </Grid>
</UserControl>
